{% extends '@VDM/layout.html.twig' %}

{% block content %}
    <section id="services">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Mes derni√®res VDM</h2>
                    <hr class="primary">
                </div>
            </div>
        </div>
        <div class="container-flui">
            <div class="row">
                {% for article in articles %}
                    <div class="col-lg-3 col-md-6 text-center">
                        <div class="row service-box">
                            {#<i class="fa fa-4x fa-diamond text-primary sr-icons"></i>#}
                            <h3>{{ article.title }}</h3>
                            <p class="text-muted">{{ article.content }}</p>
                            <p class="text-muted">{{ article.datePost|date('d-m-Y') }}</p>
                            <a href="{{ path('like', { 'article': article.id, 'user': app.user.id }) }}">
                                <i class="fa fa-2x fa-thumbs-o-up text-primary sr-icons" aria-hidden="true"></i>
                            </a>
                        </div>
                        {% if is_granted('ROLE_ADMIN') %}
                            <div class="row">
                                <a href="{{ path('_edit', { 'id': article.id }) }}">Editer</a>
                                <a href="{{ path('_edit', { 'id': article.id }) }}">Supprimer</a>
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
    <h1>Articles list</h1>

    <table>
        <thead>
            <tr>
                <th>Id</th>
                <th>Title</th>
                <th>Content</th>
                <th>Datepost</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for article in articles %}
            <tr>
                <td><a href="{{ path('_show', { 'id': article.id }) }}">{{ article.id }}</a></td>
                <td>{{ article.title }}</td>
                <td>{{ article.content }}</td>
                <td>{% if article.datePost %}{{ article.datePost|date('Y-m-d H:i:s') }}{% endif %}</td>
                <td>
                    <ul>
                        <li>
                            <a href="{{ path('_show', { 'id': article.id }) }}">show</a>
                        </li>
                        <li>
                            <a href="{{ path('_edit', { 'id': article.id }) }}">edit</a>
                        </li>
                        <li>
                            <a href="{{ path('like', { 'article': article.id, 'user': app.user.id }) }}">Like</a>
                        </li>
                    </ul>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <ul>
        <li>
            <a href="{{ path('_new') }}">Create a new article</a>
        </li>
    </ul>
{% endblock %}
